{
  "info": {
    "name": "Interview Microservice ABC - FINAL",
    "_postman_id": "7b7be2f6-7cdd-4a0e-9b2a-abc123456789",
    "description": "Complete Postman collection for Interview Microservice ABC. Uses gateway by default via {{baseUrl}}. Set {{token}} after login.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    { "key": "baseUrl", "value": "http://localhost:8080" },
    { "key": "authUrl", "value": "http://localhost:8081" },
    { "key": "userUrl", "value": "http://localhost:8082" },
    { "key": "questionUrl", "value": "http://localhost:8085" },
    { "key": "examUrl", "value": "http://localhost:8086" },
    { "key": "careerUrl", "value": "http://localhost:8084" },
    { "key": "newsUrl", "value": "http://localhost:8087" },
    { "key": "nlpUrl", "value": "http://localhost:8088" },
    { "key": "token", "value": "" }
  ],
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register (Gateway)",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/auth/register", "host": ["{{baseUrl}}"], "path": ["auth","register"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\",\n  \"password\": \"password123\",\n  \"fullName\": \"User Demo\"\n}"
            }
          }
        },
        {
          "name": "Login (Gateway)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 && pm.response.body) {",
                  "  try {",
                  "    const data = pm.response.json();",
                  "    if (data.accessToken) { pm.collectionVariables.set('token', data.accessToken); }",
                  "    if (data.token) { pm.collectionVariables.set('token', data.token); }",
                  "  } catch(e) {}",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/auth/login", "host": ["{{baseUrl}}"], "path": ["auth","login"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@example.com\",\n  \"password\": \"password123\"\n}"
            }
          }
        },
        {
          "name": "User Info (Gateway)",
          "request": {
            "method": "GET",
            "header": [ { "key": "Authorization", "value": "Bearer {{token}}" } ],
            "url": { "raw": "{{baseUrl}}/auth/user-info", "host": ["{{baseUrl}}"], "path": ["auth","user-info"] }
          }
        },
        {
          "name": "Refresh Token (Gateway)",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/auth/refresh", "host": ["{{baseUrl}}"], "path": ["auth","refresh"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{token}}\"\n}"
            }
          }
        }
      ]
    },
    {
      "name": "User",
      "item": [
        {
          "name": "Get Users (Gateway)",
          "request": {
            "method": "GET",
            "header": [ { "key": "Authorization", "value": "Bearer {{token}}" } ],
            "url": { "raw": "{{baseUrl}}/users", "host": ["{{baseUrl}}"], "path": ["users"] }
          }
        },
        {
          "name": "Get User By Id (Gateway)",
          "request": {
            "method": "GET",
            "header": [ { "key": "Authorization", "value": "Bearer {{token}}" } ],
            "url": { "raw": "{{baseUrl}}/users/1", "host": ["{{baseUrl}}"], "path": ["users","1"] }
          }
        },
        {
          "name": "Update User Role (Gateway)",
          "request": {
            "method": "PUT",
            "header": [ { "key": "Authorization", "value": "Bearer {{token}}" }, { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/users/1/role", "host": ["{{baseUrl}}"], "path": ["users","1","role"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"role\": \"ADMIN\"\n}"
            }
          }
        },
        {
          "name": "Update User Status (Gateway)",
          "request": {
            "method": "PUT",
            "header": [ { "key": "Authorization", "value": "Bearer {{token}}" }, { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/users/1/status", "host": ["{{baseUrl}}"], "path": ["users","1","status"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"ACTIVE\"\n}"
            }
          }
        }
      ]
    },
    {
      "name": "Question",
      "item": [
        {
          "name": "Get Fields (Gateway)",
          "request": {
            "method": "GET",
            "url": { "raw": "{{baseUrl}}/questions/fields", "host": ["{{baseUrl}}"], "path": ["questions","fields"] }
          }
        },
        {
          "name": "Create Field (Gateway, ADMIN)",
          "request": {
            "method": "POST",
            "header": [ { "key": "Authorization", "value": "Bearer {{token}}" }, { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/questions/fields", "host": ["{{baseUrl}}"], "path": ["questions","fields"] },
            "body": { "mode": "raw", "raw": "{\n  \"fieldName\": \"Backend Development\",\n  \"description\": \"Microservices\"\n}" }
          }
        },
        {
          "name": "Get Topics (Gateway)",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/questions/topics", "host": ["{{baseUrl}}"], "path": ["questions","topics"] } }
        },
        {
          "name": "Create Topic (Gateway, ADMIN)",
          "request": {
            "method": "POST",
            "header": [ { "key": "Authorization", "value": "Bearer {{token}}" }, { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/questions/topics", "host": ["{{baseUrl}}"], "path": ["questions","topics"] },
            "body": { "mode": "raw", "raw": "{\n  \"topicName\": \"Spring Security\",\n  \"description\": \"JWT & Filters\",\n  \"fieldId\": 1\n}" }
          }
        },
        {
          "name": "Get Levels (Gateway)",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/questions/levels", "host": ["{{baseUrl}}"], "path": ["questions","levels"] } }
        },
        {
          "name": "Create Level (Gateway, ADMIN)",
          "request": {
            "method": "POST",
            "header": [ { "key": "Authorization", "value": "Bearer {{token}}" }, { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/questions/levels", "host": ["{{baseUrl}}"], "path": ["questions","levels"] },
            "body": { "mode": "raw", "raw": "{\n  \"levelName\": \"Junior\",\n  \"description\": \"1-2 years\"\n}" }
          }
        },
        {
          "name": "Create Question (Gateway, USER/ADMIN)",
          "request": {
            "method": "POST",
            "header": [ { "key": "Authorization", "value": "Bearer {{token}}" }, { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/questions/questions", "host": ["{{baseUrl}}"], "path": ["questions","questions"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": 1,\n  \"topicId\": 1,\n  \"fieldId\": 1,\n  \"levelId\": 1,\n  \"questionTypeId\": 1,\n  \"questionContent\": \"What is JWT and how does it work?\",\n  \"questionAnswer\": \"JWT is a token...\",\n  \"language\": \"en\"\n}"
            }
          }
        }
      ]
    },
    {
      "name": "Exam",
      "item": [
        {
          "name": "Get Exams (Gateway)",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/exams", "host": ["{{baseUrl}}"], "path": ["exams"] } }
        }
      ]
    },
    {
      "name": "News",
      "item": [
        { "name": "Get News (Gateway)", "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/news", "host": ["{{baseUrl}}"], "path": ["news"] } } }
      ]
    },
    {
      "name": "NLP - AI Studio",
      "item": [
        {
          "name": "Validate Answer (Gateway)",
          "request": {
            "method": "POST",
            "header": [ { "key": "Authorization", "value": "Bearer {{token}}" }, { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/ai-studio/validate-answer", "host": ["{{baseUrl}}"], "path": ["ai-studio","validate-answer"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"question\": \"Explain ACID in databases.\",\n  \"answer\": \"ACID stands for...\",\n  \"expected_answer\": \"Atomicity, Consistency, Isolation, Durability\"\n}"
            }
          }
        },
        {
          "name": "Check Plagiarism (Gateway)",
          "request": {
            "method": "POST",
            "header": [ { "key": "Authorization", "value": "Bearer {{token}}" }, { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/ai-studio/check-plagiarism", "host": ["{{baseUrl}}"], "path": ["ai-studio","check-plagiarism"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"This is a sample answer to check originality...\"\n}"
            }
          }
        }
      ]
    }
  ]
}
