{
	"info": {
		"_postman_id": "user-service-002",
		"name": "02. User Service (16 endpoints)",
		"description": "User management service - CRUD, roles, status, Elo system",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Internal Endpoints",
			"item": [
				{
					"name": "[Internal] Create User",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"roleId\": 1,\n  \"email\": \"internal@example.com\",\n  \"password\": \"password123\",\n  \"fullName\": \"Internal User\",\n  \"dateOfBirth\": \"1990-01-01\",\n  \"address\": \"123 Main St\",\n  \"isStudying\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/users/internal/create",
							"host": ["{{base_url}}"],
							"path": ["users", "internal", "create"]
						},
						"description": "Internal endpoint called by Auth Service to create user. **Required fields**: roleId (Long), email (valid email), password (6-100 chars)"
					},
					"response": []
				},
				{
					"name": "[Internal] Check Email Exists",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/users/check-email/test@example.com",
							"host": ["{{base_url}}"],
							"path": ["users", "check-email", "test@example.com"]
						},
						"description": "Check if email already exists. Returns boolean."
					},
					"response": []
				},
				{
					"name": "[Internal] Get By Email",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/users/by-email/admin@example.com",
							"host": ["{{base_url}}"],
							"path": ["users", "by-email", "admin@example.com"]
						},
						"description": "Get user by email address"
					},
					"response": []
				},
				{
					"name": "[Internal] Validate Password",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"admin@example.com\",\n  \"password\": \"admin123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/users/validate-password",
							"host": ["{{base_url}}"],
							"path": ["users", "validate-password"]
						},
						"description": "Validate user password. Returns boolean."
					},
					"response": []
				},
				{
					"name": "[Internal] Verify Token",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"token\": \"{{access_token}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/users/verify-token",
							"host": ["{{base_url}}"],
							"path": ["users", "verify-token"]
						},
						"description": "Verify JWT token and return user info"
					},
					"response": []
				}
			],
			"description": "Internal endpoints for communication between microservices"
		},
		{
			"name": "User CRUD",
			"item": [
				{
					"name": "Get User By ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/users/{{user_id}}",
							"host": ["{{base_url}}"],
							"path": ["users", "{{user_id}}"]
						},
						"description": "Get user by ID. Requires authentication."
					},
					"response": []
				},
				{
					"name": "Update User",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"updated@example.com\",\n  \"fullName\": \"Updated Name\",\n  \"phoneNumber\": \"0123456789\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/users/{{user_id}}",
							"host": ["{{base_url}}"],
							"path": ["users", "{{user_id}}"]
						},
						"description": "Update user information. Requires USER or ADMIN role."
					},
					"response": []
				},
				{
					"name": "Delete User",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/users/1",
							"host": ["{{base_url}}"],
							"path": ["users", "1"]
						},
						"description": "Delete user by ID. Requires ADMIN role."
					},
					"response": []
				},
				{
					"name": "Get All Users",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/users?page=0&size=20&sort=id,desc",
							"host": ["{{base_url}}"],
							"path": ["users"],
							"query": [
								{
									"key": "page",
									"value": "0",
									"description": "Page number (0-indexed)"
								},
								{
									"key": "size",
									"value": "20",
									"description": "Page size"
								},
								{
									"key": "sort",
									"value": "id,desc",
									"description": "Sort by field and direction"
								}
							]
						},
						"description": "Get all users with pagination. Requires ADMIN role."
					},
					"response": []
				},
				{
					"name": "Get Users By Role",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/users/role/1?page=0&size=20",
							"host": ["{{base_url}}"],
							"path": ["users", "role", "1"],
							"query": [
								{
									"key": "page",
									"value": "0"
								},
								{
									"key": "size",
									"value": "20"
								}
							]
						},
						"description": "Get users by role ID. Requires ADMIN role."
					},
					"response": []
				},
				{
					"name": "Get Users By Status",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/users/status/ACTIVE?page=0&size=20",
							"host": ["{{base_url}}"],
							"path": ["users", "status", "ACTIVE"],
							"query": [
								{
									"key": "page",
									"value": "0"
								},
								{
									"key": "size",
									"value": "20"
								}
							]
						},
						"description": "Get users by status (ACTIVE, INACTIVE, BANNED). Requires ADMIN role."
					},
					"response": []
				}
			],
			"description": "Basic CRUD operations for users"
		},
		{
			"name": "Admin Operations",
			"item": [
				{
					"name": "Update User Role",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"roleId\": 2\n}"
						},
						"url": {
							"raw": "{{base_url}}/users/1/role",
							"host": ["{{base_url}}"],
							"path": ["users", "1", "role"]
						},
						"description": "Update user role. Requires ADMIN role."
					},
					"response": []
				},
				{
					"name": "Update User Status",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"ACTIVE\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/users/1/status",
							"host": ["{{base_url}}"],
							"path": ["users", "1", "status"]
						},
						"description": "Update user status (ACTIVE, INACTIVE, BANNED). Requires ADMIN role."
					},
					"response": []
				}
			],
			"description": "Admin-only operations for user management"
		},
		{
			"name": "Elo System",
			"item": [
				{
					"name": "Apply Elo Rating",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"userId\": {{user_id}},\n  \"eloChange\": 25,\n  \"reason\": \"Won exam challenge\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/users/elo",
							"host": ["{{base_url}}"],
							"path": ["users", "elo"]
						},
						"description": "Apply Elo rating change to user"
					},
					"response": []
				}
			],
			"description": "Elo rating system for competitive exams"
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{access_token}}",
				"type": "string"
			}
		]
	}
}
